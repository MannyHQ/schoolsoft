{% extends 'teachers/teachers.html' %}
{% block content %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styleTeachers.css' %}" />
    <div>
        <h2>Filtra por:</h2>
        <form action="{% url 'course_califications' %}" method="POST">
            {% csrf_token %}
            <div>
                <label for="">Curso</label>
                <input type="text" name="course" placeholder="Curso" required>
            </div>
            <div>
                <label for="">Asignatura</label>
                <input type="text" name="subject" placeholder="Asignatura" required>
            </div>
            <div>
                <label for="">Periodo Calificación</label>
                <input type="number" name="calification" placeholder="Nota">
            </div>
            <div>
                <button type="submit">Filtrar</button>
            </div>
        </form>
    </div>
    <div class="content_padre">
        {% for curso in cursos %}
            {% if curso.calificaciones_estudiantes %}
                <div class="content_Courses" id="courses">
                    <table class="table table-dark table-striped" id="table">
                        <h2 class="title">{{ curso.curso.level }}</h2>
                        <thead>
                            <tr>
                                <th>Asignatura</th>
                                <th>Nombre</th>
                                <th>Apellido</th>
                                <th>Calificación</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for calificacion_estudiante in curso.calificaciones_estudiantes %}
                            {% if calificacion_estudiante.calificacion %}
                                <tr>
                                    <td>{{ curso.asignatura.name }}</td>
                                    <td>{{ calificacion_estudiante.student.first_name }}</td>
                                    <td>{{ calificacion_estudiante.student.last_name }}</td>
                                    <td>
                                        {% if calification_filter %}
                                            {% if calification_filter == 1 %}
                                                {{ calificacion_estudiante.calificacion.firstPeriod }}
                                            {% elif calification_filter == 2 %}
                                                {{ calificacion_estudiante.calificacion.secondPeriod }}
                                            {% elif calification_filter == 3 %}
                                                {{ calificacion_estudiante.calificacion.thirdPeriod }}
                                            {% elif calification_filter == 4 %}
                                                {{ calificacion_estudiante.calificacion.fourthPeriod }}
                                            {% elif calification_filter == 5 %}
                                                {{ calificacion_estudiante.calificacion.finish }}
                                            {% else %}
                                                {{ calificacion_estudiante.calificacion.firstPeriod }}
                                            {% endif %}
                                        {% else %}
                                            {{ calificacion_estudiante.calificacion.firstPeriod }}
                                        {% endif %}
                                    </td>
                                </tr>
                                {% else %}
                                    asignatura no existe!
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% endif %}
        {% endfor %}
    </div>    
{% endblock %} 
